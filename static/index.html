<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB Bot Dashboard</title>
    <link rel="stylesheet" href="static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Fira+Code&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <div class="sidebar">
        <div class="logo">
            <i data-lucide="bot"></i>
            <span>FB Bot Pro</span>
        </div>
        <div class="nav-item active" onclick="switchTab('dashboard')">
            <i data-lucide="layout-dashboard"></i> Dashboard
        </div>
        <div class="nav-item" onclick="switchTab('config')">
            <i data-lucide="settings"></i> Cấu hình
        </div>
        <div class="nav-item" onclick="switchTab('logs')">
            <i data-lucide="scroll-text"></i> Nhật ký (Logs)
        </div>
        <div style="margin-top: auto;">
            <div class="nav-item" onclick="restartBot()">
                <i data-lucide="refresh-cw"></i> Khởi động lại
            </div>
        </div>
    </div>

    <div class="main-content">
        <header>
            <div>
                <h1 id="page-title">Tổng quan</h1>
                <p class="subtitle">Chào mừng trở lại, hệ thống đang sẵn sàng.</p>
            </div>
            <div id="connection-status" class="status-badge status-offline">Đang ngắt kết nối</div>
        </header>

        <!-- Dashboard Tab -->
        <div id="tab-dashboard" class="animate-fade">
            <div class="grid">
                <div class="card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>Trạng thái Bot</h3>
                        <span id="bot-status-badge" class="status-badge status-offline">Dừng</span>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button id="start-btn" class="btn btn-primary" onclick="toggleBot()">
                            <i data-lucide="play"></i> Bắt đầu
                        </button>
                        <button id="stop-btn" class="btn btn-secondary" onclick="toggleBot()" style="display: none;">
                            <i data-lucide="square"></i> Dừng lại
                        </button>
                    </div>
                </div>
                <div class="card">
                    <h3>Thống kê nhanh</h3>
                    <div style="margin-top: 20px; color: var(--text-secondary);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span>Số bài đăng hôm nay</span>
                            <span style="color: white; font-weight: 600;">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Ảnh đã tải</span>
                            <span id="img-count" style="color: white; font-weight: 600;">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3>Logs thời gian thực</h3>
                    <button class="btn btn-secondary" onclick="clearLogs()" style="padding: 6px 12px; font-size: 12px;">
                        Xóa màn hình
                    </button>
                </div>
                <div id="log-viewer" class="log-container">
                    <div class="log-entry">Đang đợi dữ liệu...</div>
                </div>
            </div>
        </div>

        <!-- Config Tab -->
        <div id="tab-config" class="animate-fade" style="display: none;">
            <div class="card">
                <form id="config-form" onsubmit="saveConfig(event)">
                    <div class="grid" style="grid-template-columns: 1fr 1fr;">
                        <div class="form-group">
                            <label>Email / ID Facebook</label>
                            <input type="text" id="cfg-email" name="email">
                        </div>
                        <div class="form-group">
                            <label>Mật khẩu</label>
                            <input type="password" id="cfg-password" name="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Danh sách Nhóm (Cung cấp list URL, mỗi dòng một link)</label>
                        <textarea id="cfg-group-urls" name="group_urls" rows="4"
                            placeholder="Ví dụ: https://www.facebook.com/groups/123..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Đường dẫn Trang (Page URL - Để chuyển profile nếu cần)</label>
                        <input type="url" id="cfg-page-url" name="page_url">
                    </div>
                    <div class="form-group">
                        <label>Nội dung bài đăng</label>
                        <textarea id="cfg-content" name="post_content" rows="6"></textarea>
                    </div>
                    <div class="grid" style="grid-template-columns: 1fr 1fr;">
                        <div class="form-group">
                            <label>Dãn cách giữa các bài đăng (Giây)</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="number" id="cfg-between-min" name="between_groups_min" placeholder="Từ (s)"
                                    title="Tối thiểu">
                                <input type="number" id="cfg-between-max" name="between_groups_max"
                                    placeholder="Đến (s)" title="Tối ưu">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Nghỉ sau mỗi vòng (Phút)</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="number" id="cfg-loop-min" name="loop_rest_min" placeholder="Từ (m)">
                                <input type="number" id="cfg-loop-max" name="loop_rest_max" placeholder="Đến (m)">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i data-lucide="save"></i> Lưu cấu hình
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="static/script.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>